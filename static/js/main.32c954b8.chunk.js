(this["webpackJsonpkenny-app"]=this["webpackJsonpkenny-app"]||[]).push([[0],{20:function(e,t,n){},22:function(e,t,n){},23:function(e,t,n){},26:function(e,t,n){"use strict";n.r(t);var i=n(0),r=n.n(i),o=n(12),a=n.n(o),s=n(3);n(20);var u=n(1),c=r.a.createContext(null);c.displayName="ServiceContext";var l,m=function(e){var t=e.children,n=e.services;return Object(u.jsx)(c.Provider,{value:n,children:t})},d=(l=c,function(){var e=Object(i.useContext)(l);if(null===e)throw new Error("".concat(l.displayName," is null, wrap your component with a matching Provider"));return e}),h=n(2),p=n(4),v=n(8),j=n(7),f=function(){function e(t,n){Object(h.a)(this,e),this.animation=this.animateJumper(50,7e3,450,7e3),this.jumperImage=void 0,this.onShotJumper=function(){},this.onPlaySound=function(){},this.onShotJumper=n,this.jumperImage=t}return Object(p.a)(e,[{key:"_animationDuration",get:function(){var e,t,n,i;return void 0!==(null===(e=this.animation.jumpAnimation)||void 0===e?void 0:e.duration)&&void 0!==(null===(t=this.animation.headAnimation)||void 0===t?void 0:t.duration)?(null===(n=this.animation.jumpAnimation)||void 0===n?void 0:n.duration)+(null===(i=this.animation.headAnimation)||void 0===i?void 0:i.duration):0}},{key:"animateJumper",value:function(e,t,n,i){return{headAnimation:{height:e,duration:t},jumpAnimation:{height:n-350+350*Math.random(),duration:i-i/2+Math.random()*(i/2)}}}},{key:"jump",value:function(){}}]),e}(),b=n.p+"static/media/phil.a5235af3.png",y=n.p+"static/media/phil.45ad2d00.wav",O=function(e){Object(v.a)(n,e);var t=Object(j.a)(n);function n(e){var i;return Object(h.a)(this,n),(i=t.call(this,b,e)).animation=i.animateJumper(50,2e3,450,5e3),i.onPlaySound=function(){new Audio(y).play()},i}return n}(f),g=n(28),x=n.p+"static/media/hui.a420bb99.wav",w=n.p+"static/media/kenny.946c358c.png",S=function(e){Object(v.a)(n,e);var t=Object(j.a)(n);function n(e){var i;return Object(h.a)(this,n),(i=t.call(this,w,e)).animation=i.animateJumper(30,2e3,450,4e3),i.onPlaySound=function(){var e=new Audio(x);setTimeout((function(){return e.play()}),500)},i}return n}(f),k=(new Audio(x),function(){function e(){var t=this;Object(h.a)(this,e),this.isGameRunning=!1,this.countDown=0,this.gameDuration=0,this.listeners={},this.amountOfJumpers=0,this.score=0,this.jumpersArray=[],this.level=1,this.controlerBoard=void 0,this.createJumpersForGame=function(e){for(var n=[],i=new O((function(){t.isGameRunning&&(t.score--,t.updateListener())})),r=0;r<e;r++){var o=new S((function(){t.isGameRunning&&(t.score++,t.updateListener())}));n.push(o)}n.push(i),t.jumpersArray=n},this.init()}return Object(p.a)(e,[{key:"_jumpersArray",get:function(){return this.jumpersArray}},{key:"init",value:function(){this.controlerBoard={buttonText:"Start",title:"Kenny\xb4s du ausl\xf6schen musst!",description:"Schie\xdfe so viele Kenny's ab, wie du kannst."}}},{key:"startGame",value:function(){switch(this.level){case 1:console.log("start level 1"),this.startNewGame(15e3,4);break;case 2:console.log("start level 2"),this.startNewGame(3e4,40)}}},{key:"goToNextLevel",value:function(){this.controlerBoard={buttonText:"Start",title:"Mehr Kenny\xb4s du ausl\xf6schen musst!",description:"Erwisch alle Kenny\xb4s"},this.level++}},{key:"startNewGame",value:function(e,t){this.gameDuration=e,this.amountOfJumpers=t,this.createJumpersForGame(this.amountOfJumpers),this.startCountDown(this.gameDuration)}},{key:"setIsGameRunning",set:function(e){this.isGameRunning=e}},{key:"addListener",value:function(e){var t=Object(g.a)();return this.listeners[t]=e,this.updateListener(),t}},{key:"removeListener",value:function(e){delete this.listeners[e]}},{key:"updateListener",value:function(){var e=this;Object.values(this.listeners).forEach((function(t){return t({isGameRunning:e.isGameRunning,countDown:e.countDown,gameDuration:e.gameDuration,amountOfJumpers:e.amountOfJumpers,score:e.score,jumpersArray:e.jumpersArray,level:e.level,controlerBoard:e.controlerBoard})}))}},{key:"startCountDown",value:function(e){var t=this;this.isGameRunning=!0;var n=(new Date).getTime()+e,i=setInterval((function(){var e=(new Date).getTime(),r=n-e,o=Math.floor((r%6e4-10)/1e3);if(r<=0)return t.isGameRunning=!1,t.jumpersArray=[],clearInterval(i),t.amountOfJumpers===t.score?t.goToNextLevel():t.controlerBoard={buttonText:"Wiederholen",title:"Du nicht alle Kenny\xb4s erwischt, du hast!",description:"Probiere es noch einmal."},void t.updateListener();t.updateListener(),t.countDown=o}),1e3)}}]),e}()),A=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"Player";Object(h.a)(this,e),this.level=0,this.name="",this.shotJumpers=0,this.name=t}return Object(p.a)(e,[{key:"setLevel",value:function(e){this.level=e}},{key:"setShotJumpers",set:function(e){this.shotJumpers=e}},{key:"reset",value:function(){this.level=0,this.shotJumpers=0}}]),e}(),J={playerService:new A("Player1"),gameService:new k},G=(n(22),n(5)),L=(n(23),Object(G.a)("div")({position:"absolute",width:"150px",height:"200px",bottom:"0px",transition:"all 2s ease-in-out"}));function D(e){var t=e.position,n=e.jumpAt,r=e.jumperImage,o=e.onShotJumper,a=e.onPlaySound,c=e.animation,l=Object(i.useState)(!1),m=Object(s.a)(l,2),d=(m[0],m[1]),h=Object(i.useState)(!1),p=Object(s.a)(h,2),v=p[0],j=p[1],f=Object(i.useRef)(null);Object(i.useRef)(null);Object(i.useEffect)((function(){setTimeout(b,n)}),[f.current]);var b=function(){var e,t,n=new KeyframeEffect(f.current,[{bottom:"0px",easing:"cubic-bezier(0.5, 0.02, 0.28, 1.01)"},{bottom:"".concat(null===(e=c.headAnimation)||void 0===e?void 0:e.height,"px"),easing:"cubic-bezier(0.5, 0.02, 0.28, 1.01)"},{bottom:"0px",easing:"cubic-bezier(0.5, 0.02, 0.28, 1.01)"}],{duration:null===(t=c.headAnimation)||void 0===t?void 0:t.duration}),i=new Animation(n);i.play(),i.addEventListener("finish",(function(e){var t,n;a();var i=new KeyframeEffect(f.current,[{bottom:"0px",easing:"cubic-bezier(0.5, 0.02, 0.28, 1.01)"},{bottom:"".concat(null===(t=c.jumpAnimation)||void 0===t?void 0:t.height,"px"),easing:"cubic-bezier(0.5, 0.02, 0.28, 1.01)"},{bottom:"0px",easing:"cubic-bezier(0.5, 0.02, 0.28, 1.01)"}],{duration:null===(n=c.jumpAnimation)||void 0===n?void 0:n.duration});new Animation(i).play()}))};return Object(u.jsx)(u.Fragment,{children:!v&&Object(u.jsx)(L,{ref:f,style:{left:"".concat(t,"px"),width:"150px",height:"0px",position:"absolute",display:"block"},children:Object(u.jsx)("img",{ref:f,onClick:function(e){var t;t=o,d(!1),j(!0),t(),j(!0)},style:{width:"150px"},src:r})})})}var E=Object(G.a)("div")({display:"flex",position:"absolute",top:"0px",left:"0px"}),R=function(e){var t=e.jumpers,n=e.onStartGame,r=e.gameInfos,o=Object(i.useState)([]),a=Object(s.a)(o,2),c=a[0],l=a[1],m=Object(i.useRef)(null),d=0;return Object(i.useEffect)((function(){m.current&&(d=m.current.offsetWidth-80)})),Object(i.useEffect)((function(){l(t.map((function(e){return Object(u.jsx)(u.Fragment,{children:r&&Object(u.jsx)(D,{position:Math.random()*d,jumpAt:Math.random()*(r.gameDuration-e._animationDuration),jumperImage:e.jumperImage,onShotJumper:e.onShotJumper,onPlaySound:e.onPlaySound,animation:e.animation})})})))}),[t]),Object(u.jsxs)("div",{ref:m,id:"board",className:"board",children:[Object(u.jsxs)(E,{children:[Object(u.jsxs)("div",{style:{padding:10},children:[Object(u.jsx)("h2",{style:{opacity:.5},children:"Time"}),Object(u.jsx)("h2",{style:{textAlign:"center"},children:null===r||void 0===r?void 0:r.countDown})]}),Object(u.jsxs)("div",{style:{padding:10},children:[Object(u.jsx)("h2",{style:{opacity:.5},children:"Shots"}),Object(u.jsx)("h2",{children:(null===r||void 0===r?void 0:r.score)+" of "+(null===r||void 0===r?void 0:r.amountOfJumpers)})," "]})]}),!(null===r||void 0===r?void 0:r.isGameRunning)&&(null===r||void 0===r?void 0:r.controlerBoard)&&Object(u.jsxs)("div",{className:"boardStartDialog",children:[Object(u.jsx)("h1",{children:r.controlerBoard.title}),Object(u.jsx)("p",{children:r.controlerBoard.description}),Object(u.jsx)("button",{className:"button",onClick:n,children:r.controlerBoard.buttonText}),Object(u.jsx)("p",{children:"Level ".concat(null===r||void 0===r?void 0:r.level)})]}),c.map((function(e){return e}))]})},N=function(){var e,t=Object(i.useState)(0),n=Object(s.a)(t,2),r=(n[0],n[1],Object(i.useState)(null)),o=Object(s.a)(r,2),a=o[0],c=o[1],l=d().gameService;return Object(i.useEffect)((function(){var e=l.addListener((function(e){c(e)}));return function(){return l.removeListener(e)}}),[l]),Object(u.jsxs)("div",{className:"container",children:[Object(u.jsx)("h1",{children:"Kennys Game"}),Object(u.jsx)(R,{onStartGame:function(){l.startGame()},gameInfos:a,jumpers:null!==(e=l._jumpersArray)&&void 0!==e?e:[]})]})};var P=function(){var e=Object(i.useRef)(null),t=Object(i.useState)(!1),n=Object(s.a)(t,2);function r(t){console.log("e.eventPhase",t.type),"mousedown"===t.type?null!==e.current&&(console.log("mouseCursor.current",e.current),e.current.style.top=t.pageY-20+"px",e.current.style.left=t.pageX-20+"px",e.current.classList.add("animation")):null!==e.current&&(console.log("mouseCursor.current",e.current),e.current.style.top=t.pageY-20+"px",e.current.style.left=t.pageX-20+"px",e.current.classList.remove("animation"))}return n[0],n[1],window.addEventListener("mousemove",(function(t){null!==e.current&&(console.log("mouseCursor.current",e.current),e.current.style.top=t.pageY-20+"px",e.current.style.left=t.pageX-20+"px")})),window.addEventListener("mouseup",r),window.addEventListener("mousedown",r),Object(u.jsxs)(m,{services:J,children:[Object(u.jsx)(N,{}),Object(u.jsx)("div",{ref:e,className:"cursor"})]})};a.a.render(Object(u.jsx)(r.a.StrictMode,{children:Object(u.jsx)(P,{})}),document.getElementById("root"))}},[[26,1,2]]]);
//# sourceMappingURL=main.32c954b8.chunk.js.map